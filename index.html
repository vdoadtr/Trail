<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JAGARAN - Annual Cultural Program</title>
    <!-- Favicon (Logo) --><link rel="icon" type="image/png" href="https://lh3.googleusercontent.com/pw/AP1GczNHbNhABZ8BJa0UFNNNDlNH4OXE_ozWBGv0HGcMbg-MiLM_ppe7VJPp8MgvJaMdFsr1RgZcJ7_alcy_hExCHAg2femF59oom5YeT7VJPp8MgvJaMdFsr1RgZcJ7_alcy_hExCHAg2femF59oom5YeT90gFC_TeHGONBPJ2eNqeY8ESILp7GSXEIDGY_EXlKIvUu-Jt1M=w953-h953-s-no-gm?authuser=0">
    
    <!-- Tailwind CSS CDN --><script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter Font --><link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">

    <!-- 
        Mandatory YouTube IFrame Player API Script
        This script allows us to control the embedded YouTube player (like changing videos).
    --><script async src="https://www.youtube.com/iframe_api"></script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f7f7;
        }
        /* Custom CSS for the full-width banner image */
        .banner-image {
            /* UPDATED: Using the new banner image URL provided by the user. */
            background-image: url('https://lh3.googleusercontent.com/pw/AP1GczMjl8jXZqHC8oBYxmttpAaMkuSNv4tShvQ1P1gveMAkzaRoB-l8wSp5NT3dWXTTBB0F90KW-5W3d2dRJYdOqjGFJhvy8XtiLd9gnkwQnqH6uj3tpS9w8z8-OiBFEu96DHCA6ucwO4Vf6AvJ7D00R6U=w1920-h378-s-no-gm?authuser=0');
            background-size: cover;
            background-position: center;
            width: 100%;
        }
        
        /* Standard 16:9 Aspect Ratio Container for Video */
        .video-container {
            position: relative;
            width: 100%;
            padding-bottom: 56.25%; /* 16:9 Aspect Ratio */
            height: 0;
            overflow: hidden;
            border-radius: 0.75rem; /* rounded-xl */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            background-color: #111827; /* Dark background for video loading/errors */
        }
        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        
        /* Navigation styles */
        .nav-button:hover {
            color: #4f46e5;
            background-color: rgba(255, 255, 255, 0.6); 
        }
        .ticket-button-cta {
            background: linear-gradient(90deg, #4f46e5 0%, #8b5cf6 100%);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .ticket-button-cta:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(79, 70, 229, 0.5);
        }
        .nav-active {
            background-color: #4f46e5;
            color: #ffffff;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        .nav-active:hover {
            background-color: #4338ca;
            color: #ffffff;
        }
        
        /* Style for the description section */
        .description-card {
            background-color: #ffffff;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            padding: 2rem;
            line-height: 1.6;
        }

        /* Styles for the collapsible Highlights content */
        .highlights-collapse {
            overflow: hidden;
            transition: max-height 0.5s ease-in-out; 
        }
        .rotated-icon {
            transform: rotate(180deg) !important;
        }
        #toggleHighlightsBtn {
            min-width: 280px;
        }

        /* Style for the playlist navigation buttons (Carousel) */
        .carousel-btn {
            background-color: #4f46e5;
            /* Added min-width/min-height for compact buttons */
            min-width: 48px;
            min-height: 48px;
            transition: background-color 0.3s, transform 0.1s;
        }
        .carousel-btn:hover {
            background-color: #4338ca;
            transform: scale(1.05);
        }
        .carousel-btn:disabled {
            background-color: #9ca3af;
            cursor: not-allowed;
            transform: none;
        }
    </style>
</head>
<body class="min-h-screen">

    <!-- 1. Navigation Bar (Fixed Overlay with 30% opacity) -->
    <header class="fixed top-0 left-0 right-0 z-50 bg-white/30 backdrop-blur-sm p-4 md:p-6 transition duration-300">
        <!-- Main Container: flex justify-between ensures Home is left and other links are right on ALL screens -->
        <div class="container mx-auto flex justify-between items-center">
            
            <!-- START OF LEFT GROUP: JAGARAN (Desktop) and Home (Always Left) -->
            <div class="flex items-center space-x-4">
                <!-- JAGARAN Text (Hidden on small screens, visible on medium screens and up) -->
                <div class="hidden md:block text-3xl font-extrabold text-indigo-600 tracking-wider">
                    <a href="https://jagoronculturalsio.github.io/home/">JAGARAN</a>
                </div>
                
                <!-- Home Button (Highlighted/Active) -->
                <a href="https://jagoronculturalsio.github.io/home/" id="homeButton" 
                   class="nav-button nav-active px-2 py-1 text-sm md:px-4 md:py-2 md:text-base rounded-lg transition duration-300">
                    Home
                </a>
            </div>
            <!-- END OF LEFT GROUP -->
            
            <!-- Right Group: Nav Links (About, Contact, Location, Ticket) -->
            <!-- justify-end ensures buttons stick to the right on small screens -->
            <nav class="flex flex-wrap justify-end space-x-2 md:space-x-4 font-semibold">
                <!-- UPDATED: Navigation buttons made smaller on mobile (px-1 py-0.5) -->
                <a href="https://jagoronculturalsio.github.io/about/" class="nav-button px-1 py-0.5 text-sm md:p-2 md:text-base rounded-lg text-gray-700 hover:bg-gray-100 transition duration-300">About</a>
                <a href="https://jagoronculturalsio.github.io/contact/" class="nav-button px-1 py-0.5 text-sm md:p-2 md:text-base rounded-lg text-gray-700 hover:bg-gray-100 transition duration-300">Contact</a>
                <a href="https://jagoronculturalsio.github.io/address/" class="nav-button px-1 py-0.5 text-sm md:p-2 md:text-base rounded-lg text-gray-700 hover:bg-gray-100 transition duration-300">Location</a>
                <!-- Ticket button also made smaller on mobile -->
                <button id="navTicketButton" 
                    class="nav-button text-gray-700 px-1 py-0.5 text-sm md:px-4 md:py-2 md:text-base rounded-lg hover:bg-gray-100 transition duration-300 shadow-sm border border-gray-200"
                    onclick="handleTicketClick()">
                    Ticket
                </button>
            </nav>
        </div>
    </header>

    <!-- 2. Banner/Hero Section (Full Width) --><div id="banner" class="banner-image w-full h-[35vh] md:h-[40vh] mt-[70px] md:mt-[92px]"></div>
    
    <!-- 3. Main Content Wrapper (Centered) --><div id="app-content" class="container mx-auto p-4 md:p-8 pt-0">

        <!-- Main Title Section (BELOW BANNER) --><section id="home" class="text-center pt-8">
            <h1 class="text-4xl md:text-6xl font-black text-gray-800 mb-4">
                <span class="text-indigo-600">JAGARAN</span> Cultural Festival
            </h1>
            <p class="text-xl text-gray-500">The Annual Cultural Awakening. Join us for an unforgettable celebration.</p>
        </section>

        <main class="space-y-16">

            <!-- 1. Main YouTube Video Section --><section id="main-video-section" class="max-w-4xl mx-auto" aria-label="Program Details Video">
                <h2 class="text-3xl font-bold text-gray-700 mb-4 text-center">A warm welcome to all of you at our festival.</h2>
                <div id="mainVideoContainer" class="video-container">
                    <!-- Main Video Iframe --><iframe 
                        id="mainVideoFrame"
                        src="https://www.youtube.com/embed/mc1xggktlro?autoplay=1&loop=1&playlist=mc1xggktlro&controls=0&playsinline=1"
                        allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" 
                        allowfullscreen
                        title="JAGARAN Program Details Video"
                        frameborder="0">
                    </iframe>
                </div>
            </section>

            <!-- 2. Description Section --><section id="description-section" class="max-w-4xl mx-auto">
                <h2 class="text-3xl font-bold text-gray-700 mb-4 text-center">Description</h2>
                <div class="description-card">
                    <p class="text-gray-700 text-base mb-4">
                        Culture and entertainment are an integral part of our lives. To provide a refreshing escape from the busyness of our daily routines, Tamaddun Shilpigosthi is delighted to present a wholesome cultural program for you to enjoy with family, relatives, and friends.
                    </p>
                    <p class="text-gray-700 text-base mb-4">
                        Culture reflects the stories of joy, sorrow, and emotions hidden within our social lives. It can spark a revolution or bring about a change in society's traditional mindset. The practice of value-based culture builds a healthy society. Our mission is to counter vulgarity and cultural degradation by promoting an educational and enlightening culture.
                    </p>
                    <p class="text-gray-700 text-base mb-4">
                        With this goal in mind, a historic cultural event titled the "Jagaran Cultural Festival" is set to take place on December 28th at Gopalpur House, near the airport in the North 24 Parganas district.
                    </p>
                    <p class="text-gray-800 text-base text-center mt-6">
                        We cordially invite you all, along with your friends and family, to this event. Your presence is earnestly awaited.
                    </p>
                </div>
            </section>
            
            <!-- NEW: Festival Highlights Toggle Section --><section id="highlights-toggle-section" class="max-w-4xl mx-auto py-8">
                <div class="text-center">
                    <button id="toggleHighlightsBtn" 
                        class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-8 rounded-full shadow-xl transition duration-300 flex items-center justify-center mx-auto"
                        aria-expanded="false" 
                        aria-controls="highlights-content">
                        Highlights of Festival
                        <svg id="toggleIcon" class="w-5 h-5 ml-2 transition-transform duration-300 transform" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                </div>
                
                <!-- Collapsible Content --><div id="highlights-content" class="highlights-collapse mt-6" style="max-height: 0;">
                    <div class="description-card p-6 md:p-8 bg-indigo-50 border border-indigo-200">
                        <h3 class="text-2xl font-extrabold text-indigo-700 mb-4 border-b pb-2">Main Attractions</h3>
                        <ul class="space-y-3 text-left text-gray-700 list-disc pl-5">
                            <li><span class="font-semibold text-indigo-600">Cultural Performances:</span> Various types of songs, dances, and poetry recitations.</li>
                            <li><span class="font-semibold text-indigo-600">Interactive Workshops:</span> Sessions on traditional art and Bengali handicrafts.</li>
                            <li><span class="font-semibold text-indigo-600">Educational Drama:</span> Educational drama focused on social awareness (on the "Jagaran" theme).</li>
                            <li><span class="font-semibold text-indigo-600">Art Exhibition:</span> Exhibition of works by local painters and photographers.</li>
                            <li><span class="font-semibold text-indigo-600">Food Stalls:</span> Arrangement of traditional Bengali cuisine and various delicious snacks.</li>
                        </ul>
                        <p class="mt-4 text-center text-sm text-indigo-500 font-medium">— Join us to witness this cultural awakening. —</p>
                    </div>
                </div>
            </section>

            <!-- 3. BOOK TICKET Call-to-Action (CTA) Button --><section class="text-center py-8">
                <h2 class="text-4xl font-extrabold text-gray-800 mb-6">Ready to Join the Celebration?</h2>
                <button id="ctaTicketButton" 
                    class="ticket-button-cta text-white font-bold text-xl px-12 py-4 rounded-full shadow-2xl uppercase tracking-wider"
                    onclick="handleTicketClick()">
                    BOOK TICKET NOW
                </button>
                <p class="text-sm text-gray-500 mt-4">Limited Seats Available. Secure your spot today!</p>
            </section>

            <!-- 4. UPDATED: Dynamic YouTube Playlist Carousel Section -->
            <!-- ADDED: px-4 sm:px-8 for horizontal padding on the section itself -->
            <section id="playlist-section" class="py-10 px-4 sm:px-8 bg-white rounded-xl shadow-xl max-w-4xl mx-auto">
                <h2 class="text-3xl font-bold text-gray-700 mb-6 text-center">JAGARAN Playlist</h2>
                
                <!-- YouTube Player Container -->
                <!-- REMOVED: mx-4 md:mx-auto to allow full width within the new section padding -->
                <div class="video-container"> 
                    <!-- This div is the placeholder for the YouTube Player --><div id="playlistPlayer"></div> 
                </div>

                <!-- Navigation Controls and Video Counter -->
                <!-- REMOVED: px-4 from the controls div, relying on section padding -->
                <div class="flex flex-col items-center mt-6"> 
                    <!-- Updated title text for single video mode --><p id="videoTitle" class="text-lg font-semibold text-gray-800 mb-4 text-center h-6 overflow-hidden">
                        Video Loading...
                    </p>
                    
                    <div class="flex space-x-6">
                        <!-- Previous Button (Only Icon) -->
                        <button id="prevBtn" onclick="changePlaylistVideo(-1)" 
                            class="carousel-btn text-white font-bold p-3 rounded-full shadow-lg flex items-center justify-center w-12 h-12" 
                            disabled>
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg> 
                        </button>
                        
                        <!-- Video Counter & Status --><div id="videoCounter" class="flex items-center justify-center text-xl font-bold text-indigo-600 bg-indigo-100 px-4 rounded-full shadow-inner min-w-[70px]">
                            Loading...
                        </div>
                        
                        <!-- Next Button (Only Icon) -->
                        <button id="nextBtn" onclick="changePlaylistVideo(1)" 
                            class="carousel-btn text-white font-bold p-3 rounded-full shadow-lg flex items-center justify-center w-12 h-12" 
                            disabled>
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                        </button>
                    </div>
                </div>
            </section>
            
            <!-- Placeholder anchors for navigation links --><div id="about-placeholder"></div>
            <div id="contact-placeholder"></div>
            <div id="address-placeholder"></div>

        </main>
    </div>

    <!-- Footer/Copyright Section --><footer class="bg-gray-800 text-white text-center py-4 mt-8 rounded-t-xl shadow-inner">
        <p class="text-sm text-gray-400">© 2025 JAGARAN Cultural Festival | All rights reserved.</p>
    </footer>

    <script>
        // --- Configuration & Initialization ---
        const TICKET_LINK = "https://jagoronculturalsio.github.io/ticket/"; 
        // UPDATED: Using the provided Playlist ID to enable the carousel functionality.
        const PLAYLIST_ID = "PLGhDEZQb-0gCrSAjpAvdXU2fLKWMbRvRm"; // <--- New Playlist ID added here
        
        // --- Variables for Highlights Toggle ---
        const toggleHighlightsBtn = document.getElementById('toggleHighlightsBtn');
        const highlightsContent = document.getElementById('highlights-content');
        const toggleIcon = document.getElementById('toggleIcon');

        // --- Playlist Carousel Variables ---
        let player; // Global variable for the YouTube Player object
        const videoCounter = document.getElementById('videoCounter');
        const videoTitleDisplay = document.getElementById('videoTitle');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        
        // --- Firebase/Auth Setup (Mandatory in this environment) ---
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};

        // --- Interaction Logic: Ticket Button Handler ---
        function handleTicketClick() {
            window.location.href = TICKET_LINK;
        }

        // --- Interaction Logic: Highlights Toggle ---
        function toggleHighlights() {
            const isExpanded = toggleHighlightsBtn.getAttribute('aria-expanded') === 'true';

            if (isExpanded) {
                highlightsContent.style.maxHeight = '0';
                toggleHighlightsBtn.setAttribute('aria-expanded', 'false');
                toggleIcon.classList.remove('rotated-icon');
            } else {
                highlightsContent.style.maxHeight = highlightsContent.scrollHeight + 'px';
                toggleHighlightsBtn.setAttribute('aria-expanded', 'true');
                toggleIcon.classList.add('rotated-icon');
            }
        }
        
        // --- YouTube Player API Functions ---
        
        // This function is called automatically by the YouTube API script 
        window.onYouTubeIframeAPIReady = function() {
            // Create the YouTube player instance
            player = new YT.Player('playlistPlayer', {
                height: '100%',
                width: '100%',
                playerVars: {
                    // Re-enabling playlist mode:
                    'listType': 'playlist', 
                    'list': PLAYLIST_ID, 
                    'controls': 1,
                    'modestbranding': 1,
                    'rel': 0,
                    'autoplay': 0 // We don't want it to auto-play on load
                },
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                }
            });
        }

        function onPlayerReady(event) {
            console.log("YouTube Playlist Player is Ready.");
            // Initial update when the player is loaded
            updateCarouselStatus();
        }
        
        function onPlayerStateChange(event) {
            // Update status whenever the video changes or state changes (e.g., video ends)
            if (event.data === YT.PlayerState.PLAYING || event.data === YT.PlayerState.PAUSED || event.data === YT.PlayerState.ENDED) {
                updateCarouselStatus();
            }
            // If the video ends, automatically go to the next video (optional but good for carousels)
            if (event.data === YT.PlayerState.ENDED) {
                // We use nextVideo() here, but the updateCarouselStatus will handle disabling the button if it's the last video.
                changePlaylistVideo(1); 
            }
        }

        // Main function to update the button status and counter/title
        function updateCarouselStatus() {
            try {
                // IMPORTANT: The player might throw an error if the playlist is restricted. 
                // We assume getPlaylist() will work if the playlist is embeddable.
                const playlistLength = player.getPlaylist().length;
                // getPlaylistIndex returns 0-based index. We convert to 1-based for display.
                const playlistIndex = player.getPlaylistIndex() + 1; 

                // 1. Update Counter
                videoCounter.textContent = `${playlistIndex} / ${playlistLength}`;

                // 2. Update Title
                const videoData = player.getVideoData();
                if (videoData && videoData.title) {
                    videoTitleDisplay.textContent = videoData.title;
                } else {
                    videoTitleDisplay.textContent = `Video Loading...`;
                }

                // 3. Update Buttons
                prevBtn.disabled = (playlistIndex <= 1);
                nextBtn.disabled = (playlistIndex >= playlistLength);

            } catch (error) {
                console.warn("Player data not fully available yet or there is an issue with the playlist. Retrying update or showing error message.");
                // If it fails after a few retries, it's likely the embedding restriction error again.
                videoCounter.textContent = `Error!`;
                videoTitleDisplay.textContent = `Trouble loading playlist.`;
                prevBtn.disabled = true;
                nextBtn.disabled = true;
                // Note: The YouTube player will display its own error message (like the screenshot) if embedding is disabled.
                
                // Fallback retry for initial load race condition
                // Only retry once to avoid infinite loops if it's a genuine error.
                if (videoCounter.textContent === 'Loading...') {
                    setTimeout(updateCarouselStatus, 500); 
                }
            }
        }
        
        // Function called by the buttons to change the video
        window.changePlaylistVideo = function(direction) {
            if (player) {
                if (direction === 1) {
                    // Go to next video
                    player.nextVideo();
                } else if (direction === -1) {
                    // Go to previous video
                    player.previousVideo();
                }
                // Give a moment for the new video data to load before updating status
                setTimeout(updateCarouselStatus, 200); 
            }
        }

        // Initialize events on load
        window.addEventListener('load', () => {
            // Attach toggle listener
            if (toggleHighlightsBtn) {
                toggleHighlightsBtn.addEventListener('click', toggleHighlights);
            }
            
            // Note: onYouTubeIframeAPIReady handles player initialization automatically.
        });

    </script>
</body>
</html>
